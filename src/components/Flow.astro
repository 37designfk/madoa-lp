---
const base = import.meta.env.BASE_URL;
const steps = [
  {
    number: 1,
    title: 'お問い合わせ',
    description:
      'お電話またはメールフォームからお気軽にご連絡ください。状況をお伺いし、最適な対応をご案内します。',
    image: 'images/mainimage-thum-02.png',
    imageAlt: 'お客様との相談の様子',
  },
  {
    number: 2,
    title: '現地確認・お見積もり',
    description:
      'スタッフが現地にお伺いし、ガラスの状態を確認。その場で正確なお見積もりをご提示します。',
    image: 'images/mainimage-thum-05.png',
    imageAlt: 'スタッフによる現地確認',
  },
  {
    number: 3,
    title: '施工',
    description:
      '経験豊富な職人が丁寧に窓ガラスの交換作業を行います。作業時間は通常30分〜1時間程度です。',
    image: 'images/mainimage-thum-06.png',
    imageAlt: '施工作業中の様子',
  },
  {
    number: 4,
    title: '完了・アフターフォロー',
    description:
      '施工完了後、仕上がりをご確認いただきます。施工後の保証もしっかり対応いたしますのでご安心ください。',
    image: 'images/mainimage-thum-01.png',
    imageAlt: '施工完了のご確認',
  },
];
---

<section class="py-16 md:py-24 bg-gray-50">
  <div class="max-w-5xl mx-auto px-4">
    <h2 class="text-2xl md:text-3xl font-bold text-center mb-4">
      <span class="text-primary-600">サービスの流れ</span>
    </h2>
    <p class="text-gray-500 text-center mb-12">お問い合わせから施工完了まで、4つのステップで安心サポート</p>

    <div class="relative">
      <!-- Connecting line (desktop) -->
      <div class="hidden md:block absolute top-16 left-[calc(12.5%+20px)] right-[calc(12.5%+20px)] h-0.5 bg-primary-200"></div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 md:gap-4">
        {steps.map((step, index) => (
          <div class="relative flex flex-col items-center text-center">
            <!-- Mobile connecting line -->
            {index < steps.length - 1 && (
              <div class="md:hidden absolute top-full left-1/2 -translate-x-1/2 w-0.5 h-8 bg-primary-200"></div>
            )}

            <!-- Step number circle -->
            <div class="relative z-10 w-14 h-14 bg-primary-600 rounded-full flex items-center justify-center mb-4 shadow-md">
              <span class="text-white font-bold text-lg">{step.number}</span>
            </div>

            <!-- Step image -->
            <div class="mb-4">
              <img
                src={`${base}${step.image}`}
                alt={step.imageAlt}
                loading="lazy"
                class="w-20 h-20 rounded-full object-cover shadow-md"
              />
            </div>

            <!-- Text -->
            <h3 class="text-lg font-bold text-gray-800 mb-2">{step.title}</h3>
            <p class="text-gray-600 text-sm leading-relaxed">{step.description}</p>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
